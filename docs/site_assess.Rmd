---
title: CCHA site assessments
author: "MW Beck"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  html_document:
    code_folding: hide
---

```{r setup, echo = T, message = F, warning = F}
knitr::opts_chunk$set(echo = TRUE, warning = F, message = F)

box::use(
  here[...], 
  ggplot2[...], 
  tidyr[...],
  dplyr[...], 
  ggridges[...],
  lubridate[ymd], 
  forcats[fct_reorder2], 
  reactable[...]
)

source(here('R/funcs.R'))

load(file = here('data/cchadat.RData'))
load(file = here('data/treedat.RData'))

thm <- theme_minimal(base_size = 14) + 
  theme(
    panel.grid.minor = element_blank() 
  )

# test args
site <- 'Big Bend - TECO'
sp <- 'Avicennia germinans'
zones <- c("Brazilian Pepper Berm", "Coastal Upland", "Immature Mangrove Fringe", "Mangrove Fringe", "Salt Barren", "Salt Marsh", "Transitional Wetland")
```

Plot showing number of times a zone was identified across transects, dates.

```{r, fig.height = 5, fig.width = 7}
zonecnt_plo(cchadat, thm)
```

Plot showing total distance zone was recorded across transect, dates.

```{r, fig.height = 5, fig.width = 7}
zonedst_plo(cchadat, thm)
```

An example showing zones for two sample dates at one site. 

```{r, fig.height = 3, fig.width = 12}
sitezonedst_plo1(cchadat, site = site, thm)
```

To evaluate simple changes in zones over time, an estimate of total distance per zone between time points could be evaluated.  This is also very similar to the previous plot.

```{r, fig.height = 4, fig.width = 12}
sitezonedst_plo2(cchadat, site, thm)
```

The same site, but showing species data along the transect.

```{r fig.height = 8, fig.width = 12}
sitezonedst_plo3(cchadat, site, thm)
```

An evaluation of a single species across all sites, can be shown as frequency occurrence across the transect or mean percent basal cover. This example shows frequency occurrence of *Avicennia germinans*. 

```{r, fig.height = 4, fig.width = 12}
sppsum_plo(cchadat, sp, typ = 'fo', thm)
```

And now average percent basal cover. 

```{r, fig.height = 4, fig.width = 12}
sppsum_plo(cchadat, sp, typ = 'cover', thm)
```

A table of species frequency occurrence by zone, over time: 

```{r}
sitezonesum_tab(cchadat, site = site)
```

Same thing but as percent basal cover.

```{r}
sitezonesum_tab(cchadat, site = site, typ = 'cover')
```

A plot of sum of percent basal cover by arbitrary meter markings, top species, and across zones.

```{r, height = 8, width = 8}
sitesum_plo(cchadat, site, delim = 10, top = 8)
```

A plot of sum of percent basal cover by arbitrary meter markings, top species, and for select zones.

```{r, height = 8, width = 8}
sitesum_plo(cchadat, site, delim = 10, top = 8, zone_name = c('Mangrove Fringe', 'Coastal Upland'))
```
